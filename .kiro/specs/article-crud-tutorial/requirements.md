# 記事CRUD機能 - 学習チュートリアル要件書

## はじめに

このプロジェクトは、プログラミング初学者向けの学習アプリケーションとして、記事のCRUD（作成・読み取り・更新・削除）機能をチャプター形式で段階的に実装していくものです。各チャプターでは関連する概念をインプットしながら、ハンズオン形式で実装を進めていきます。

## 要件

### 要件1: 記事データモデルの設計と実装

**ユーザーストーリー:** 学習者として、記事データの構造を理解し、Djangoモデルとマイグレーションを作成できるようになりたい

#### 受け入れ基準

1. WHEN 記事モデルを定義する THEN システムは以下のフィールドを含むArticleモデルを作成する SHALL
   - author（外部キー、Userモデルへの参照）
   - title（文字列、最大200文字）
   - content（テキスト）
   - created_at（作成日時、自動設定）
   - updated_at（更新日時、自動更新）

2. WHEN マイグレーションファイルを作成する THEN システムはデータベーススキーマを正しく生成する SHALL

3. WHEN マイグレーションを実行する THEN システムはデータベースにテーブルを作成する SHALL

### 要件2: 記事一覧表示機能

**ユーザーストーリー:** ユーザーとして、投稿された記事の一覧を見て、興味のある記事を選択できるようになりたい

#### 受け入れ基準

1. WHEN 記事一覧ページにアクセスする THEN システムは全ての記事のタイトルと作成日時を表示する SHALL

2. WHEN 記事のタイトルをクリックする THEN システムは該当記事の詳細ページに遷移する SHALL

3. WHEN 記事が存在しない場合 THEN システムは「記事がありません」というメッセージを表示する SHALL

4. WHEN ログインユーザーが自分の記事を見る THEN システムは編集と削除のリンクを表示する SHALL

### 要件3: 記事投稿機能とバリデーション

**ユーザーストーリー:** ログインユーザーとして、新しい記事を投稿し、適切なバリデーションでデータの整合性を保ちたい

#### 受け入れ基準

1. WHEN ログインユーザーが記事投稿ページにアクセスする THEN システムは記事投稿フォームを表示する SHALL

2. WHEN 未ログインユーザーが記事投稿ページにアクセスする THEN システムはログインページにリダイレクトする SHALL

3. WHEN タイトルが空の場合 THEN システムは「タイトルは必須です」というエラーメッセージを表示する SHALL

4. WHEN タイトルが200文字を超える場合 THEN システムは「タイトルは200文字以内で入力してください」というエラーメッセージを表示する SHALL

5. WHEN 内容が空の場合 THEN システムは「内容は必須です」というエラーメッセージを表示する SHALL

6. WHEN 有効なデータで投稿する THEN システムは記事を保存し、詳細ページにリダイレクトする SHALL

### 要件4: 記事詳細表示機能

**ユーザーストーリー:** ユーザーとして、記事の詳細情報を確認し、必要に応じて編集や削除ができるようになりたい

#### 受け入れ基準

1. WHEN 記事詳細ページにアクセスする THEN システムは以下の情報を表示する SHALL
   - 投稿者名
   - タイトル
   - 内容
   - 作成日時
   - 更新日時

2. WHEN 記事の投稿者がログインしている場合 THEN システムは編集と削除のボタンを表示する SHALL

3. WHEN 記事の投稿者以外がアクセスする場合 THEN システムは編集と削除のボタンを表示しない SHALL

4. WHEN 存在しない記事IDでアクセスする THEN システムは404エラーページを表示する SHALL

### 要件5: 記事編集・更新機能

**ユーザーストーリー:** 記事の投稿者として、自分の記事を編集して内容を更新できるようになりたい

#### 受け入れ基準

1. WHEN 記事の投稿者が編集ページにアクセスする THEN システムは現在の記事内容が入力された編集フォームを表示する SHALL

2. WHEN 記事の投稿者以外が編集ページにアクセスする THEN システムは記事詳細ページにリダイレクトする SHALL

3. WHEN 未ログインユーザーが編集ページにアクセスする THEN システムはログインページにリダイレクトする SHALL

4. WHEN 有効なデータで更新する THEN システムは記事を更新し、updated_atフィールドを現在時刻に設定する SHALL

5. WHEN 更新が成功する THEN システムは記事詳細ページにリダイレクトし、成功メッセージを表示する SHALL

### 要件6: デバッグ機能と記事削除機能

**ユーザーストーリー:** 開発者として、アプリケーションの問題を特定・解決し、記事の削除機能を安全に実装できるようになりたい

#### 受け入れ基準

1. WHEN 記事の投稿者が削除ボタンをクリックする THEN システムは削除確認ダイアログを表示する SHALL

2. WHEN 削除を確認する THEN システムは記事を削除し、記事一覧ページにリダイレクトする SHALL

3. WHEN 記事の投稿者以外が削除URLに直接アクセスする THEN システムは記事詳細ページにリダイレクトする SHALL

4. WHEN 未ログインユーザーが削除URLにアクセスする THEN システムはログインページにリダイレクトする SHALL

5. WHEN デバッグモードが有効な場合 THEN システムは詳細なエラー情報を表示する SHALL

6. WHEN 本番環境でエラーが発生する場合 THEN システムは適切なエラーページを表示する SHALL

### 要件7: チュートリアル学習体験

**ユーザーストーリー:** 学習者として、各チャプターで段階的に概念を学びながら、実装スキルを身につけたい

#### 受け入れ基準

1. WHEN 各チャプターを開始する THEN システムは関連する概念の説明を提供する SHALL

2. WHEN 実装手順を進める THEN システムは明確なステップバイステップの指示を提供する SHALL

3. WHEN エラーが発生する THEN システムは学習者向けの分かりやすい解説を提供する SHALL

4. WHEN チャプターを完了する THEN システムは次のチャプターへの導線を提供する SHALL